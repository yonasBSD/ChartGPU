<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChartGPU Performance Benchmark</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <h1 class="title">ChartGPU Performance Benchmark</h1>
    <p class="subtitle">Hardcore benchmark with exact FPS measurement and unlimited configurability</p>
  </header>

  <!-- Main Container -->
  <div class="main-container">
    <!-- Configuration Panel -->
    <aside class="config-panel">
      <div class="panel-section">
        <h2 class="section-title">Configuration</h2>
        
        <div class="form-group">
          <label for="pointCount">Point Count</label>
          <input type="number" id="pointCount" value="1000000" step="1000" min="100">
          <span class="hint">No limit - enter billions if you dare</span>
        </div>

        <div class="form-group">
          <label for="seriesCount">Series Count</label>
          <input type="number" id="seriesCount" value="1" min="1" max="20" step="1">
        </div>

        <div class="form-group">
          <label for="dataType">Data Type</label>
          <select id="dataType">
            <option value="line">Line</option>
            <option value="scatter">Scatter</option>
            <option value="bar">Bar</option>
            <option value="candlestick">Candlestick</option>
          </select>
        </div>

        <div class="form-group">
          <label for="renderMode">Render Mode</label>
          <select id="renderMode">
            <option value="worker">Worker Thread (recommended)</option>
            <option value="main">Main Thread</option>
          </select>
        </div>
      </div>

      <div class="panel-section">
        <h2 class="section-title">Streaming</h2>
        
        <div class="form-group">
          <label for="streamRate">Points per Frame</label>
          <input type="number" id="streamRate" value="10000" min="100" step="100">
        </div>

        <div class="form-group">
          <label for="streamDuration">Duration (frames)</label>
          <input type="number" id="streamDuration" value="100" min="1" step="10">
        </div>
      </div>

      <div class="panel-section actions">
        <button id="btnGenerate" class="btn btn-primary">Generate</button>
        <button id="btnStream" class="btn btn-secondary">Start Streaming</button>
        <button id="btnClear" class="btn btn-secondary">Clear</button>
        <button id="btnEmergency" class="btn btn-danger">Emergency Stop</button>
      </div>

      <div id="statusMessage" class="status-message"></div>
    </aside>

    <!-- Chart and Metrics Area -->
    <main class="content-area">
      <!-- Chart Container -->
      <div id="chart" class="chart-container"></div>

      <!-- Metrics Panel -->
      <div class="metrics-panel">
        <div class="metrics-grid">
          <!-- Exact FPS Display -->
          <div class="metric-card fps-card">
            <div class="metric-label">FPS</div>
            <div id="fpsDisplay" class="metric-value fps-value" data-quality="smooth">--</div>
            <div class="metric-hint">60+ = smooth</div>
          </div>

          <!-- Frame Time -->
          <div class="metric-card">
            <div class="metric-label">Frame Time</div>
            <div id="frameTimeDisplay" class="metric-value">--</div>
            <div class="metric-hint">Min / Avg / Max / P95 / P99</div>
          </div>

          <!-- Memory Usage -->
          <div class="metric-card">
            <div class="metric-label">Memory</div>
            <div id="memoryDisplay" class="metric-value">--</div>
            <div class="metric-hint">Used / Peak</div>
          </div>

          <!-- Frame Drops -->
          <div class="metric-card">
            <div class="metric-label">Frame Drops</div>
            <div id="frameDropsDisplay" class="metric-value">--</div>
            <div class="metric-hint">Total / Consecutive</div>
          </div>

          <!-- Total Frames -->
          <div class="metric-card">
            <div class="metric-label">Total Frames</div>
            <div id="totalFramesDisplay" class="metric-value">--</div>
            <div class="metric-hint">Since start</div>
          </div>

          <!-- Elapsed Time -->
          <div class="metric-card">
            <div class="metric-label">Elapsed</div>
            <div id="elapsedDisplay" class="metric-value">--</div>
            <div class="metric-hint">Running time</div>
          </div>
        </div>

        <!-- Frame Time Graph -->
        <div class="frame-graph-container">
          <div class="frame-graph-header">
            <span class="frame-graph-title">Frame Times (last 120 frames)</span>
            <span class="frame-graph-legend">
              <span class="legend-item"><span class="legend-color good"></span>Good (&lt;16.67ms)</span>
              <span class="legend-item"><span class="legend-color slow"></span>Slow (16.67-33ms)</span>
              <span class="legend-item"><span class="legend-color drop"></span>Drop (&gt;33ms)</span>
            </span>
          </div>
          <canvas id="frameGraph" class="frame-graph" width="800" height="100"></canvas>
        </div>
      </div>
    </main>
  </div>

  <!-- Error/Warning Messages -->
  <div id="warningToast" class="toast toast-warning"></div>

  <script type="module" src="./main.ts"></script>
</body>
</html>
