<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChartGPU Ultimate Benchmark</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <a href="https://github.com/ChartGPU/ChartGPU" class="github-link" target="_blank" rel="noopener noreferrer" aria-label="ChartGPU on GitHub">
      <svg class="github-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"/>
      </svg>
      <span>GitHub</span>
    </a>
    <h1 class="title">ChartGPU Ultimate Benchmark</h1>
    <p class="subtitle">Hardcore benchmark with exact FPS measurement and unlimited configurability (main thread)</p>
  </header>

  <!-- Main Container -->
  <div class="main-container">
    <!-- Configuration Panel -->
    <aside class="config-panel">
      <div class="panel-section">
        <h2 class="section-title">Configuration</h2>
        
        <div class="form-group">
          <label for="pointCount">Point Count (per series)</label>
          <input type="number" id="pointCount" value="1000000" step="1000" min="100">
          <span class="hint">No limit - enter billions if you dare</span>
        </div>

        <div class="form-group">
          <label for="seriesCount">Series Count</label>
          <input type="number" id="seriesCount" value="1" min="1" max="20" step="1">
        </div>

        <!-- Total Rendered Points Display -->
        <div class="total-points-display" id="totalPointsDisplay">
          <div class="total-points-label">Total Rendered Points</div>
          <div class="total-points-value" id="totalPointsValue" data-warning="false">
            1,000,000
          </div>
          <div class="total-points-hint" id="totalPointsHint">1.0M points</div>
        </div>

        <div class="form-group">
          <label for="dataType">Data Type</label>
          <select id="dataType">
            <option value="line">Line</option>
            <option value="scatter">Scatter</option>
            <option value="bar">Bar</option>
            <option value="candlestick">Candlestick</option>
          </select>
        </div>
      </div>

      <div class="panel-section">
        <h2 class="section-title">Streaming</h2>
        
        <div class="form-group">
          <label for="streamRate">Points per Frame (series 0)</label>
          <input type="number" id="streamRate" value="10000" min="100" step="100">
        </div>

        <div class="form-group">
          <label for="streamDuration">Duration (frames)</label>
          <input type="number" id="streamDuration" value="100" min="1" step="10">
        </div>
      </div>

      <div class="panel-section actions">
        <button id="btnGenerate" class="btn btn-primary">Generate</button>
        <button id="btnStream" class="btn btn-secondary">Start Streaming</button>
        <button id="btnClear" class="btn btn-secondary">Clear</button>
        <button id="btnEmergency" class="btn btn-danger">Emergency Stop</button>
      </div>

      <div id="statusMessage" class="status-message"></div>
    </aside>

    <!-- Chart and Metrics Area -->
    <main class="content-area">
      <!-- Chart Container -->
      <div id="chart" class="chart-container"></div>

      <!-- Metrics Panel -->
      <div class="metrics-panel">
        <div class="metrics-grid">
          <!-- Exact FPS Display -->
          <div class="metric-card fps-card">
            <div class="metric-label">FPS</div>
            <div id="fpsDisplay" class="metric-value fps-value" data-quality="smooth">--</div>
            <div class="metric-hint">60+ = smooth</div>
          </div>

          <!-- Frame Time -->
          <div class="metric-card">
            <div class="metric-label">Frame Time</div>
            <div id="frameTimeDisplay" class="metric-value">--</div>
            <div class="metric-hint">Min / Avg / Max / P95 / P99</div>
          </div>

          <!-- Memory Usage -->
          <div class="metric-card">
            <div class="metric-label">Memory</div>
            <div id="memoryDisplay" class="metric-value">--</div>
            <div class="metric-hint">Used / Peak</div>
          </div>

          <!-- Frame Drops -->
          <div class="metric-card">
            <div class="metric-label">Frame Drops</div>
            <div id="frameDropsDisplay" class="metric-value">--</div>
            <div class="metric-hint">Total / Consecutive</div>
          </div>

          <!-- Total Frames -->
          <div class="metric-card">
            <div class="metric-label">Total Frames</div>
            <div id="totalFramesDisplay" class="metric-value">--</div>
            <div class="metric-hint">Since start</div>
          </div>

          <!-- Elapsed Time -->
          <div class="metric-card">
            <div class="metric-label">Elapsed</div>
            <div id="elapsedDisplay" class="metric-value">--</div>
            <div class="metric-hint">Running time</div>
          </div>
        </div>

        <!-- Frame Time Graph -->
        <div class="frame-graph-container">
          <div class="frame-graph-header">
            <span class="frame-graph-title">Frame Times (last 120 frames)</span>
            <span class="frame-graph-legend">
              <span class="legend-item"><span class="legend-color good"></span>Good (&lt;16.67ms)</span>
              <span class="legend-item"><span class="legend-color slow"></span>Slow (16.67-33ms)</span>
              <span class="legend-item"><span class="legend-color drop"></span>Drop (&gt;33ms)</span>
            </span>
          </div>
          <canvas id="frameGraph" class="frame-graph" width="800" height="100"></canvas>
        </div>
      </div>
    </main>
  </div>

  <!-- Error/Warning Messages -->
  <div id="warningToast" class="toast toast-warning"></div>

  <script type="module" src="./main.ts"></script>
</body>
</html>

